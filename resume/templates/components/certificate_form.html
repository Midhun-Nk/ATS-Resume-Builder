{% load widget_tweaks %}
<div class="md:flex gap-6">
  <!-- Left side: Certificate Form -->
  <div class="md:w-1/2">
    <h2 class="text-xl font-bold mb-4 text-gray-800 dark:text-gray-100">First Certificate</h2>
    <div class="-mx-3 md:flex mb-6">
      <div class="md:w-1/2 px-3">
        <label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2">Certificate</label>
        {{ certificate_form.first_certificate|add_class:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-300 rounded py-3 px-4" }}
      </div>
      <div class="md:w-1/2 px-3">
        <label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2">Date</label>
        {{ certificate_form.first_cert_date|add_class:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-300 rounded py-3 px-4" }}
      </div>
    </div>

    <h2 class="text-xl font-bold mb-4 text-gray-800 dark:text-gray-100">Second Certificate</h2>
    <div class="-mx-3 md:flex mb-6">
      <div class="md:w-1/2 px-3">
        <label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2">Certificate</label>
        {{ certificate_form.second_certificate|add_class:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-300 rounded py-3 px-4" }}
      </div>
      <div class="md:w-1/2 px-3">
        <label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2">Date</label>
        {{ certificate_form.second_cert_date|add_class:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-300 rounded py-3 px-4" }}
      </div>
    </div>

    <h2 class="text-xl font-bold mb-4 text-gray-800 dark:text-gray-100">Third Certificate</h2>
    <div class="-mx-3 md:flex mb-6">
      <div class="md:w-1/2 px-3">
        <label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2">Certificate</label>
        {{ certificate_form.third_certificate|add_class:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-300 rounded py-3 px-4" }}
      </div>
      <div class="md:w-1/2 px-3">
        <label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2">Date</label>
        {{ certificate_form.third_cert_date|add_class:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-300 rounded py-3 px-4" }}
      </div>
    </div>

    <h2 class="text-xl font-bold mb-4 text-gray-800 dark:text-gray-100">Fourth Certificate</h2>
    <div class="-mx-3 md:flex mb-6">
      <div class="md:w-1/2 px-3">
        <label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2">Certificate</label>
        {{ certificate_form.fourth_certificate|add_class:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-300 rounded py-3 px-4" }}
      </div>
      <div class="md:w-1/2 px-3">
        <label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2">Date</label>
        {{ certificate_form.fourth_cert_date|add_class:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-300 rounded py-3 px-4" }}
      </div>
    </div>
  </div>

  <!-- Right side: Certificate Cards -->
  <div class="md:w-1/2 space-y-6 mt-6 md:mt-0">
    {% for certificate in certificate_instance %}
      <div
        class="certificate-card bg-white dark:bg-gray-800 rounded-xl shadow-md p-6 border border-gray-200 dark:border-gray-700 cursor-pointer hover:shadow-lg transition"
        onclick="populateCertificateForm(event, `{{ certificate.first_certificate }}`, `{{ certificate.first_cert_date }}`, `{{ certificate.second_certificate }}`, `{{ certificate.second_cert_date }}`, `{{ certificate.third_certificate }}`, `{{ certificate.third_cert_date }}`, `{{ certificate.fourth_certificate }}`, `{{ certificate.fourth_cert_date }}`)">
        
        {% if certificate.first_certificate %}
          <h2 class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-1">{{ certificate.first_certificate }}</h2>
          <p class="text-sm text-gray-500 dark:text-gray-400 mb-2">ðŸ“… {{ certificate.first_cert_date }}</p>
        {% endif %}

        {% if certificate.second_certificate %}
          <h2 class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-1">{{ certificate.second_certificate }}</h2>
          <p class="text-sm text-gray-500 dark:text-gray-400 mb-2">ðŸ“… {{ certificate.second_cert_date }}</p>
        {% endif %}

        {% if certificate.third_certificate %}
          <h2 class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-1">{{ certificate.third_certificate }}</h2>
          <p class="text-sm text-gray-500 dark:text-gray-400 mb-2">ðŸ“… {{ certificate.third_cert_date }}</p>
        {% endif %}

        {% if certificate.fourth_certificate %}
          <h2 class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-1">{{ certificate.fourth_certificate }}</h2>
          <p class="text-sm text-gray-500 dark:text-gray-400">ðŸ“… {{ certificate.fourth_cert_date }}</p>
        {% endif %}
      </div>
    {% endfor %}
  </div>
</div>

<!-- Script -->
<script>
  function populateCertificateForm(event, first_cert, first_date, second_cert, second_date, third_cert, third_date, fourth_cert, fourth_date) {
    document.querySelector('[name="first_certificate"]').value = first_cert;
    document.querySelector('[name="first_cert_date"]').value = first_date;
    document.querySelector('[name="second_certificate"]').value = second_cert;
    document.querySelector('[name="second_cert_date"]').value = second_date;
    document.querySelector('[name="third_certificate"]').value = third_cert;
    document.querySelector('[name="third_cert_date"]').value = third_date;
    document.querySelector('[name="fourth_certificate"]').value = fourth_cert;
    document.querySelector('[name="fourth_cert_date"]').value = fourth_date;

    // Highlight active card
    document.querySelectorAll('.certificate-card').forEach(card => {
      card.classList.remove('ring-2', 'ring-blue-400', 'shadow-lg');
    });
    event.currentTarget.classList.add('ring-2', 'ring-blue-400', 'shadow-lg');
  }
</script>
